GAS LISTING func.S 			page 1


   1              	/*
   2              	        as -ahlsm=func.lst --32 -gstabs+ -o func.o func.S
   3              	        ld -melf_i386 -o func-exe-S func.o
   4              	*/
   5              	#       ABI —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –≤—ã–∑–æ–≤–∞—Ö —Ñ—É–Ω–∫—Ü–∏–π
   6              	
   7              	#       –ë–∞–π—Ç—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞ Symbols —á–∏—Ç–∞—é—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É.
   8              	#       –ï—Å–ª–∏ –ø—Ä–æ—á—Ç–µ–Ω –∫–æ–¥ —Ü–∏—Ñ—Ä—ã, —Ç–æ –æ–Ω –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è 
   9              	#       –≤ 4-–±–∞–π—Ç–æ–≤–æ–µ —Ü–µ–ª–æ–µ, –∏–Ω–∞—á–µ –≤ –∑–Ω–∞—á–µ–Ω–∏–µ -1.
  10              	#       –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤ Numbers.
  11              	
  12              	.include "my-macro"         # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
   1              	/*
   2              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
   3              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
   4              	 *     - –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
   5              	 *
   6              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
   7              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 exit'
   8              	*/
   9              	.macro Finish
  10              	    movl $1, %eax         # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ exit
  11              	    movl $0, %ebx     # –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
  12              	    int $0x80         # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞ –∫–æ–¥–∞ —Å
  18              	 * —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  19              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  20              	 *     - –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –±–∞–π—Ç–∞
  21              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  22              	 *    - –≤ %eax –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤
  23              	 *    - –ø–æ –∞–¥—Ä–µ—Å—É buf_addr - —Å—á–∏—Ç–∞–Ω–Ω—ã–π –±–∞–π—Ç
  24              	 *
  25              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  26              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 read'
  27              	*/
  28              	.macro Getchar buf_addr
  29              	    movl $3, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ read
  30              	    movl $0, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ
  31              	    movl \buf_addr, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ (–æ–Ω –∂–µ - —Ñ–∞–∫—Ç–∏—á
  32              	                     # –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞)
  33              	    movl $1, %edx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—
  34              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  35              	.endm
  36              	
  37              	/*
  38              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è  –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–
  39              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  40              	 *     - –°—Ç—Ä–æ–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
  41              	 *
  42              	 * –ü—Ä–∏–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞:
  43              	 *    Puts "–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏"
  44              	 *
  45              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
GAS LISTING func.S 			page 2


  46              	 *    - –≤—ã–≤–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª—ã –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–
  47              	 *      –∏ –≤—Å–ª–µ–¥ –∑–∞ –Ω–∏–º–∏ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ \n
  48              	 *
  49              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  50              	 * –°–º. —Ç–∞–∫–∂–µ 'man puts', 'man 2 write'
  51              	*/
  52              	.macro Puts string
  53              	.data
  54              	    str\@:     .ascii "\string\n"  # —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –
  55              	
  56              	    strlen\@ =     . - str\@           # –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–
  57              	
  58              	.text
  59              	    movl $4, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
  60              	    movl $1, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤
  61              	    movl $str\@, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏
  62              	    movl $strlen\@, %edx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–
  63              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  64              	.endm
  13              	
  14              	.data                       # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö 
  15              	
  16              	#Not_num_count: .long 0
  17              	
  18              	Symbols:
  19 0000 39314132 	.asciz  "91A23B456C789"     # –º–∞—Å—Å–∏–≤ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤, —Ü–∏—Ñ—Ä –∏ "–Ω–µ —Ü–∏—
  19      33423435 
  19      36433738 
  19      3900
  20              	
  21              	#  –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç—è–Ω–∏—è  —Å—Ç–µ–∫–∞ 
  22              	#  –∏ –º–µ—Å—Ç –†–û–ù –≤ –Ω–µ–º –ø–æ—Å–ª–µ pusha –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º
  23 000e 494E4954 	Ini:  .ascii "INIT"         # —Å—Ç–µ–∫  
  24 0012 61784620 	EAXF:  .ascii "axF "        # %eax
  25 0016 64694620 	EDIF:  .ascii "diF "        # %edi
  26 001a 62702D34 	EBPm4:  .ascii "bp-4"       # –¥–ª—è –ø–æ–∫–∞–∑–∞ %ebp —á–µ—Ä–µ–∑ %esi
  27              	
  28              	.bss                        # —Å–µ–∫—Ü–∏—è –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ 
  29              	
  30              	.lcomm  Numbers, 40         # –º–∞—Å—Å–∏–≤ 4-—Ö –±–∞–π—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ü–∏—Ñ—Ä
  31              	
  32              	.global _start              # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
  33              	
  34              	.text                       # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
  35              	
  36              	_start:
  37              	
  38 0000 90       	  nop
  39              	
  40              	#  –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å—Ö–æ–¥–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ç–µ–∫–∞    
  41              	
  42 0001 A10E0000 	  movl Ini, %eax  
  42      00
  43 0006 890424   	  movl %eax, 0(%esp)
  44              	
  45              	#  –†–µ–≥–∏—Å—Ç—Ä–æ–≤ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ pusha
  46              	  
GAS LISTING func.S 			page 3


  47 0009 A1120000 	  movl EAXF,  %eax        # –ø–µ—Ä–≤—ã–π 
  47      00
  48 000e 8B3D1600 	  movl EDIF,  %edi        # –ø–æ—Å–ª–µ–¥–Ω–∏–π
  48      0000
  49 0014 8B351A00 	  movl EBPm4, %esi        # —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Å–ª–µ %ebp 
  49      0000
  50              	  # %ebp - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é –∞–¥—Ä–µ—Å–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
  51              	    
  52              	# pusha - –ø–æ–º–µ—â—è–µ—Ç –Ω–∞ –≤–µ—Ä—à–∏–Ω—É —Å—Ç–µ–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ—Å—å–º–∏ —Ä–µ–≥–∏—Å—
  53 001a 60       	  pusha                   # –†–û–ù –≤ —Å—Ç–µ–∫, –Ω–∞—á–∏–Ω–∞—è —Å  %eax –∏ –¥–æ %edi
  54              	
  55 001b 68000000 	  pushl $Symbols          # –ü–∞—Ä–∞–º–µ—Ç—Ä-2 - –∞–¥—Ä–µ—Å –º–∞—Å—Å–∏–≤–∞ –≤ —Å—Ç–µ–∫  
  55      00
  56 0020 6A08     	  pushl $8                # –ü–∞—Ä–∞–º–µ—Ç—Ä-1 –≤ —Å—Ç–µ–∫, —Ü–∏–∫–ª 0-7  
  57              	  # –º–µ—Å—Ç–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –í –°–¢–ï–ö
  58 0022 E8150000 	  call Read_Sym           # –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–ø–∏—Å—å –∫ —Å—Ç–µ–∫ –∞–¥—Ä–µ—Å–∞ –≤–æ–∑
  58      00
  59              	
  60 0027 A31E0000 	        movl %eax, LVAR1  #  movl %eax, Not_num_count
  60      00
  61 002c 83C408   	  addl $8,%esp            # –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Read_Sym
  62              	  # –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –†–û–ù, –≤ –ø–æ—Ä—è–¥–∫–µ, –æ–±—Ä–∞—Ç–Ω–æ–º –ø—Ä–∏–Ω—è—Ç–æ–º—É –≤ –∫–æ–º–
  63              	  # pusha –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ—Å—å–º–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–µ–
  64 002f 61       	  popa                    # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –†–û–ù
  65              	
  66              	  Finish                  # –∫–æ–Ω–µ—Ü —Ä–∞–±–æ—Ç—ã, –≤–æ–∑–≤—Ä–∞—Ç –≤ –û–° 
  66 0030 B8010000 	>  movl $1,%eax
  66      00
  66 0035 BB000000 	>  movl $0,%ebx
  66      00
  66 003a CD80     	>  int $0x80
  67              	
  68              	.type  Read_Sym, @function    # —á–∏—Ç–∞–µ—Ç Symbols –≤ —Ü–∏–∫–ª–µ
  69              	
  70              	#  –ò–º–µ–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  71              	
  72              	# P1 - —á–∏—Å–ª–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ 
  73              	# P2 - –∞–¥—Ä–µ—Å –º–∞—Å—Å–∏–≤–∞ –æ—Ç–∫—É–¥–∞ —á–∏—Ç–∞—Ç—å
  74              	
  75              	# –ü—Ä–æ—á—Ç–µ–Ω–Ω—ã–π –±–∞–π—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Trans_Sym. 
  76              	# –ï–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ %eax –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è
  77              	# –≤ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–µ Numbers
  78              	
  79              	Read_Sym:
  80              	# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–ª–æ–≥ 
  81              	# –í –°–¢–ï–ö –ó–ê–ü–ò–°–´–í–ê–ï–¢–°–Ø = –ú–ï–°–¢–û –í–´–•–û–î–ê, –°–ö–û–õ–¨–ö–û –†–ê–ó –¶–ò–ö–õ FO
  82 003c 55       	  pushl %ebp              # %ebp  –≤—ã–∑—ã–≤–∞—é—â–µ–π -> —Å—Ç–µ–∫
  83 003d 89E5     	  movl  %esp, %ebp        # –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥—Ä–µ—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–
  84              	# –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –≤ —Å—Ç–µ–∫–µ –ø—É—Ç–µ–º –±–∞–∑–æ–≤–æ–π 
  85              	# –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ebp
  86              	                   
  87              	.data                     # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  88              	
  89 001e 00000000 	LVAR1:  .long 0           # –ø–æ–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ö–∞–¥—Ä–∞ —Å—Ç–µ–∫–
  90              	
  91              	.text                     # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
  92              	# –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É
GAS LISTING func.S 			page 4


  93 003f 83EC04   	  subl  $4, %esp          # –∑–∞–≤–µ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω. –≤ –ö–∞–¥—Ä–µ 1
  94 0042 B8000000 	  movl  $0,%eax
  94      00
  95 0047 8945FC   	    movl  %eax,-4(%ebp)
  96              	
  97              	#  –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ö–æ–¥  —Ñ—É–Ω–∫—Ü–∏–∏
  98              	
  99 004a 29C9     	  subl %ecx, %ecx   # –∏–Ω–∏—Ü–∏—Ä—É–µ–º —Ü–∏–∫–ª–∞ –ø–æ –±–∞–π—Ç–∞–º Symbols
 100              	
 101              	#  –ù–∞—á–∞–ª–æ —Ü–∏–∫–ª–∞ 
 102              	  
 103              	NextSym:  
 104 004c 8B550C   	  movl 12(%ebp), %edx     # –∞–¥—Ä–µ—Å P2 - –º–∞—Å—Å–∏–≤–∞ –≤ %edx
 105              	
 106              	#  –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ Trans_Sym
 107              	
 108              	#  –ï–µ –ø–∞—Ä–∞–º–µ—Ç—Ä - –±–∞–π—Ç –ø–µ—Ä–µ–¥–∞–¥–∏–º —á–µ—Ä–µ–∑ %bl —Ä–µ–≥–∏—Å—Ç—Ä–∞ %ebx
 109              	
 110 004f 29DB     	  subl %ebx, %ebx         # –≤—Å–µ –Ω—É–ª–∏ 
 111              	
 112              	#  - –ø–µ—Ä–µ–¥–∞–¥–∏–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ –≤ %bl 
 113              	#  %edx - –±–∞–∑–æ–≤—ã–π - –≤–∑—è–ª–∏ –∏–∑ P2,
 114              	#  %ecx - –∏–Ω–¥–µ–∫—Å–Ω—ã–π - –Ω–æ–º–µ—Ä —Ü–∏–∫–ª–∞, MM = 1 - –æ–¥–∏–Ω –±–∞–π—Ç
 115              	#  —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è
 116              	
 117 0051 8A1C0A   	  movb (%edx,%ecx,1), %bl     
 118              	  
 119 0054 80FB39   	  cmpb $'9', %bl        # –∫–æ–¥ –±–æ–ª—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '9' ?
 120 0057 7735     	  ja Not_num            # –î–ê - –∫–æ–ª-–≤–æ –Ω–µ —Ü–∏—Ñ—Ä + 1
 121 0059 80FB30   	  cmpb $'0', %bl        # –∫–æ–¥ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ —Å–∏–≤–æ–ª–∞ '0' ?
 122 005c 7230     	  jb Not_num            # –î–ê - –∫–æ–ª-–≤–æ –Ω–µ —Ü–∏—Ñ—Ä + 1
 123              	
 124              	
 125              	#  –ü–∞—Ä–∞–º–µ—Ç—Ä Trans_Sym –≥–æ—Ç–æ–≤, –º–æ–∂–Ω–æ –µ–µ –≤—ã–∑—ã–≤–∞—Ç—å.
 126              	
 127              	.data                   # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
 128              	
 129              	#  –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ—Å—Ç –†–û–ù –≤ —Å—Ç–µ–∫–µ –ø–æ—Å–ª–µ pusha –≤ ReadSym
 130              	
 131 0022 61786631 	EAXf1:  .ascii "axf1"   # %eax
 132 0026 64696631 	EDIf1:  .ascii "dif1"   # %edi
 133              	
 134              	.text # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
 135              	
 136              	#  –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –†–û–ù f1 –ø–µ—Ä–µ–¥ pusha
 137              	  
 138 005e A1220000 	  movl EAXf1,  %eax     # –ø–µ—Ä–≤—ã–π 
 138      00
 139 0063 8B3D2600 	  movl EDIf1,  %edi     # –ø–æ—Å–ª–µ–¥–Ω–∏–π
 139      0000
 140 0069 8B351A00 	  movl EBPm4,  %esi     # —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Å–ª–µ %ebp 
 140      0000
 141              	# %ebp - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é –∞–¥—Ä–µ—Å–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
 142              	  
 143 006f 60       	  pusha                 # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –†–û–ù —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ Read_Sym  
 144              	
 145 0070 53       	  pushl %ebx            # –ü–∞—Ä–∞–º–µ—Ç—Ä Trans_Sym –≤ —Å—Ç–µ–∫
GAS LISTING func.S 			page 5


 146              	  
 147 0071 E8280000 	  call Trans_Sym
 147      00
 148              	
 149 0076 83C404   	  addl $4,%esp          # –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Trans_Sym
 150              	
 151              	#  –û–ø—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç Read_Sym
 152              	
 153              	#  –í %eax 4 –±–∞–π—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç Trans_Sym 
 154              	
 155              	#  –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –º–∞—Å—Å–∏–≤ Numbers.  
 156              	
 157              	#  –ë–∞–∑–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –ù–ï –ó–ê–î–ê–ù - –∑–∞–ø—è—Ç–∞—è –ø–æ—Å–ª–µ –ª–µ–≤. —Å–∫–æ–±–∫–∏
 158              	#  %ecx - –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä, –º–∞—Å—à—Ç–∞—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å - 4
 159              	#  —Ç.–∫. —ç–ª–µ–º–µ–Ω—Ç—ã Numbers - 4-—Ö –±–∞–π—Ç–æ–≤—ã–µ —Å–ª–æ–≤–∞
 160              	#  —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è
 161              	
 162 0079 89048D00 	  movl  %eax, Numbers(,%ecx,4) 
 162      000000
 163              	  
 164 0080 61       	  popa                  # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã Read_Sym    
 165              	  
 166              	Skip:
 167 0081 41       	  incl %ecx             # –Ω–∞—Ä–∞—â–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–∞
 168 0082 3B4D08   	  cmpl 8(%ebp), %ecx    # —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–∞ —Ä–∞–≤–µ–Ω –ø–µ—Ä–≤–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É?
 169              	  
 170 0085 75C5     	  jne NextSym           # –î–ê, –Ω–∞ –ø–æ–≤—Ç–æ—Ä, –ù–ï–¢ - –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
 171              	
 172              	#  –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–ø–∏–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–∏
 173              	
 174 0087 8B45FC   	movl -4(%ebp), %eax     # –∫–æ–ª-–≤–æ –Ω–µ—á–∏—Å–ª–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
 175 008a 89EC     	  movl %ebp, %esp       # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
 176 008c 5D       	  popl %ebp             # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ebp
 177 008d C3       	  ret                   # –≤–æ–∑–≤—Ä–∞—Ç –≤ –≤—ã–∑—ã–≤–∞—é—â—É—é
 178              	# –ø–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ü–∏—Ñ—Ä
 179              	Not_num:
 180              	  # –µ—Å–ª–∏ –∫–æ–¥ –Ω–µ —Å–∏–º–≤–æ–ª —Ü–∏—Ñ—Ä—ã
 181 008e C7048D00 	  movl $-1, Numbers(,%ecx,4)
 181      000000FF 
 181      FFFFFF
 182 0099 FF45FC   	  incl -4(%ebp)
 183 009c EBE3     	  jmp Skip
 184              	  
 185              	# –∫–æ–Ω–µ—Ü Read_Sym
 186              	
 187              	#    –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ –≤ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞
 188              	#    c —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∫–æ–¥–æ–≤ —Ü–∏—Ñ—Ä. P1 - –±–∞–π—Ç –∫–æ–¥–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
 189              	#    –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–∏—Ñ—Ä—ã –∏–ª–∏ -1 –µ—Å–ª–∏ –∫–æ–¥ –Ω–µ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã.
 190              	  
 191              	.type  Trans_Sym, @function
 192              	
 193              	Trans_Sym:
 194              	
 195              	#  –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–ª–æ–≥ —Ñ—É–Ω—Ü–∏–∏
 196              	
 197 009e 55       	  pushl %ebp            # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–µ–∫–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—ã–≤—à–µ–µ –≤ –≤—ã–∑
 198 009f 89E5     	  movl  %esp, %ebp      # –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥—Ä–µ—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–
GAS LISTING func.S 			page 6


 199              	#                         –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –≤ —Å—Ç–µ–∫–µ –ø—É—Ç–µ–º –±–∞–∑–æ
 200              	#                         –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ %ebp
 201              	
 202              	.data                   # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
 203              	
 204              	LVAR2:
 205 002a 4C467232 	  .ascii "LFr2"         # –ø–æ–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ö–∞–¥—Ä–∞ 2
 206              	
 207              	.text                   # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
 208              	
 209 00a1 83EC04   	  subl  $4, %esp        # –∑–∞–≤–µ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω. –≤ –ö–∞–¥—Ä–µ 1
 210 00a4 A12A0000 	    movl  LVAR2,%eax
 210      00
 211 00a9 8945FC   	    movl  %eax,-4(%ebp)
 212              	
 213              	#  —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
 214              	
 215 00ac 8B4508   	  movl 8(%ebp), %eax    # –ø–µ—Ä–≤—ã–π  –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ eax
 216              	  
 217              	#  –§–∏–ª—å—Ç—Ä –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã  
 218              	  
 219 00af 83E830   	  subl $0x30, %eax      # –ø–æ–ª—É—á–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
 220              	  
 221 00b2 EB00     	  jmp Ret_norm          # –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç —á–∏—Å–ª. –∑–Ω–∞—á–µ–Ω–∏—è —Ü–∏—Ñ—Ä—ã  
 222              	
 223              	Ret_norm:
 224              	
 225              	#  –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–ø–∏–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–∏
 226              	
 227 00b4 89EC     	  movl %ebp, %esp       # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
 228 00b6 5D       	  popl %ebp             # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ebp
 229 00b7 C3       	  ret                   # –≤–æ–∑–≤—Ä–∞—Ç –≤ –≤—ã–∑—ã–≤–∞—é—â—É—é
 230              	
 231              	#  –ö–æ–Ω–µ—Ü  Trans_Sym
 232              	
 233              	  .end   # –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
GAS LISTING func.S 			page 7


DEFINED SYMBOLS
              func.S:18     .data:0000000000000000 Symbols
              func.S:23     .data:000000000000000e Ini
              func.S:24     .data:0000000000000012 EAXF
              func.S:25     .data:0000000000000016 EDIF
              func.S:26     .data:000000000000001a EBPm4
              func.S:30     .bss:0000000000000000 Numbers
              func.S:36     .text:0000000000000000 _start
              func.S:79     .text:000000000000003c Read_Sym
              func.S:89     .data:000000000000001e LVAR1
              func.S:103    .text:000000000000004c NextSym
              func.S:179    .text:000000000000008e Not_num
              func.S:131    .data:0000000000000022 EAXf1
              func.S:132    .data:0000000000000026 EDIf1
              func.S:193    .text:000000000000009e Trans_Sym
              func.S:166    .text:0000000000000081 Skip
              func.S:204    .data:000000000000002a LVAR2
              func.S:223    .text:00000000000000b4 Ret_norm

NO UNDEFINED SYMBOLS
